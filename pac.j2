/**
 * Generated by wy-z/CIDR2PAC
 * Last updated at {{ date }}
 * More informations: https://github.com/wy-z/CIDR2PAC
 */

var networks =[
    {%- for n in networks %}
    ["{{ n.network_address }}", "{{ n.netmask }}"],
    {%- endfor %}
];

var cache = {};

function isInside(host) {
    if (cache[host] !== undefined) {
        return cache[host];
    }

    var result = false;
    for (i in networks) {
        if (isInNet(dnsResolve(host), networks[i][0], networks[i][1])) {
            result = true;
        }
    }
    cache[host] = result;
    return cache[host];
}

function FindProxyForURL(url, host) {
  if (isInside(host)) {
    return 'DIRECT';
  } else {
    return '{{ proxy_expr }}; DIRECT';
  }
}